{% extends 'base.html' %}

{% block titile %}
    {{ article.title }}
{% endblock titile %}

{% block content %}
    <div>
        标题：{{ status }}-{{ article.title }}
    </div>

    <div>
        作者：{{ article.author }}
    </div>

    <div>
        {{ article.detail|safe }}
    </div>

    <hr>

    {% if request.user.is_authenticated %}
        <form action="{% url 'comment:add_comment' %}" method="POST"
              id="comment_form" role="form">
            {% csrf_token %}
            <input type="hidden" name="model" value="articles">
            <input type="hidden" name="model_id" value="{{ article.id }}">
            <div class="form-group">
                {{ comment_form.detail }}
            </div>

            <span id="comment_error_text">{{ error_message }}</span>
            <div class="form-group">
                <button class="btn btn-primary" id="comment_submit"
                        type="submit">
                    发表评论
                </button>
            </div>
        </form>

    {% else %}
        登录后才能进行评论
    {% endif %}

    <hr>

    <h3>评论：</h3>
    <div>
        {% if comments %}
            {% for comment in comments %}
                <div>
                    <b>{{ comment.cmt_user }}</b>
                </div>
                <div>
                    {{ comment.cmt_detail|safe }}
                </div>
                <div>
                    {{ comment.cmt_date| date:'Y-m-d H:i:s' }}
                </div>
                <hr>
            {% endfor %}

        {% else %}
            暂无评论
        {% endif %}
    </div>

{% endblock content %}


